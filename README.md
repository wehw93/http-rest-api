В этом проекте я практировался с REST-API.
make чтобы собрать исполняемый файл.
apiserver конфигурируется с помощью конгфиг файла формата toml. Для парсинга конфиг файла использовал зависимость BurntSushi.
Для логирования использовал зависимость logrus. Для парсинга уровня логирования реализовал функцию configureLogger. Уровень логирования также указывается в кофиг файле формата toml.
В качестве роутера http-сервера я использовал пакет gorilla/mux. Для описания роутов реализовал функцию configureRouter.
Для тестирования функций использовал зависимость stretchr/testify.
В качестве базы данных использовал Postgresql, для работы с ним использовался стандартный пакета database/sql. Основная идея: Будет некая сущность хранилища, которая скрывает от внешного мира все детали реализации и предоставляет только готовые публичные методы для работы.
Хранилище состоит из нескольких репозиториев. Строка подключения также будет парситься из конфиг файла формата toml.
Писал миграции с помощью утилиты golang-migrate/migrate.
Создал пакет model, в котором будут храниться все структуры, которые будут являться представлениями в базе данны - модели данных. Все поля структур соответсвуют схемам в базе данных. За работу с бд будут отвечать репозитории, для каждой модели данных, в директории store.
Для того, что бы извне работать с репозиторием User, я содал метод User, через него будет происходить взаимодействие с бд, относительно юзера.
Для удобства тестирования работы с БД, создал хелпер файл testing.go. Будет возвращать нам тестовое хранилище, которое уже будет сконфигурировано нужным образом для тестирования и также будет возвращать функцию, для очистки этого хранилища, что бы каждый новый тест работал с чистой БД.


